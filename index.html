<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <div id="app"></div>
    <script type="module">
      import * as template from "./src/template";
      import * as toModuleName from "./src/to-module-name";

      const app = document.getElementById("app");

      if ("IS_PULL_REQUEST" === "true") {
        app.innerHTML += `
          <div>Pull request</div>
          <div>branch: <a href="https://github.com/RENDER_GIT_REPO_SLUG/tree/RENDER_GIT_BRANCH">RENDER_GIT_BRANCH</a></div>
          <div>commit: <a href="https://github.com/RENDER_GIT_REPO_SLUG/commit/RENDER_GIT_COMMIT">RENDER_GIT_COMMIT</a></div>
        `;
      }

      runTests({
        name: "templateSvelte",
        fn: (testCase) =>
          template.templateSvelte(testCase.source, testCase.filename, {
            classes: testCase.classes,
          }),
        testCases: [
          {
            name: "Element only",
            source: `<svg></svg>`,
            filename: undefined,
            classes: [],
          },
          {
            name: "With attributes and children",
            source: `<svg id="id" class="class"><title>Title</title></svg>`,
            filename: undefined,
            classes: [],
          },
          {
            name: "With classes",
            source: `<svg id="id" class="class"><title>Title</title></svg>`,
            filename: undefined,
            classes: ["my-class"],
          },
        ],
      });

      runTests({
        name: "toModuleName",
        fn: ({ source }) => toModuleName.toModuleName(source),
        testCases: [
          {
            name: "Lowercase",
            source: `one.svg`,
          },
          {
            name: "Lowercase with dashes",
            source: `one-two-three.svg`,
          },
          {
            name: "Starting with a number",
            source: `123 abc.svg`,
          },
          {
            name: "Containing underscores",
            source: `one_two_three.svg`,
          },
          {
            name: "Containing underscores/dashes",
            source: `one_two-three.svg`,
          },
        ],
      });

      function runTests(testSuite) {
        app.innerHTML += `<h1>${testSuite.name}</h1>`;

        testSuite.testCases.forEach((testCase) => {
          const output = testSuite.fn.call(this, testCase);

          app.innerHTML += `<h2>${testCase.name}</h2>`;
          app.innerHTML += `<b>input</b>:`;
          app.append(testCase.source);
          app.innerHTML += "<br>";
          app.innerHTML += `<b>output</b>:`;
          app.append(output);
          app.innerHTML += "<hr>";
        });
      }
    </script>
  </body>
</html>
